{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/DealsForm.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function DealsForm() {\r\n  const [form, setForm] = useState({\r\n    description: \"\",\r\n    currentPrice: \"\",\r\n    oldPrice: \"\",\r\n    storeName: \"\",\r\n    imageLink: \"\",\r\n    productLink: \"\",\r\n    reviewLink: \"\",\r\n    couponCode: \"\",\r\n    shippingCost: \"\",\r\n    notes: \"\",\r\n    expireDate: \"\",\r\n    category: \"\",\r\n    holidayTag: \"\",\r\n  });\r\n\r\n  const HOLIDAY_TAGS = [\r\n    \"\",\r\n    \"Black Friday\",\r\n    \"Cyber Monday\",\r\n    \"Thanksgiving Week\",\r\n    \"Christmas & Holiday\",\r\n    \"New Year\",\r\n    \"Back to School\",\r\n    \"Prime Day\",\r\n    \"Memorial Day\",\r\n    \"Labor Day\",\r\n    \"Independence Day\",\r\n    \"Spring Sale\",\r\n    \"Clearance Event\",\r\n  ];\r\n\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n  const [productUrl, setProductUrl] = useState(\"\");\r\n  const [fetching, setFetching] = useState(false);\r\n\r\n  const onChange = (e: any) =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  // üß† Auto-fetch logic (Amazon/Walmart/Target main product)\r\n  const handleAutoFetch = async () => {\r\n    if (!productUrl) return alert(\"Please paste a product link first.\");\r\n    setFetching(true);\r\n    setMsg(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/scrape\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ url: productUrl }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || \"Failed to fetch product data\");\r\n\r\n      setForm((prev) => ({\r\n        ...prev,\r\n        description: data.title || prev.description,\r\n        storeName: data.store || prev.storeName,\r\n        category: data.category || prev.category,\r\n        imageLink: data.image || prev.imageLink,\r\n        productLink: productUrl,\r\n        currentPrice:\r\n          data.price?.replace(/[^0-9.]/g, \"\") || prev.currentPrice,\r\n      }));\r\n\r\n      setMsg(\"‚úÖ Product info fetched successfully!\");\r\n    } catch (err: any) {\r\n      console.error(\"‚ùå Fetch error:\", err);\r\n      setMsg(`‚ùå ${err.message}`);\r\n    } finally {\r\n      setFetching(false);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setMsg(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/deals\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...form,\r\n          expireDate: form.expireDate ? form.expireDate : null,\r\n          published_at: new Date().toISOString(),\r\n          // ‚ö†Ô∏è The backend will parse `notes` and create rows in deal_related_links\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      setSaving(false);\r\n\r\n      if (!res.ok) {\r\n        console.error(\"API error:\", data);\r\n        setMsg(`‚ùå ${data.error || \"Failed to save\"}`);\r\n      } else {\r\n        console.log(\"‚úÖ Deal saved:\", data);\r\n        setMsg(\"‚úÖ Deal saved successfully!\");\r\n        setForm({\r\n          description: \"\",\r\n          currentPrice: \"\",\r\n          oldPrice: \"\",\r\n          storeName: \"\",\r\n          imageLink: \"\",\r\n          productLink: \"\",\r\n          reviewLink: \"\",\r\n          couponCode: \"\",\r\n          shippingCost: \"\",\r\n          notes: \"\",\r\n          expireDate: \"\",\r\n          category: \"\",\r\n          holidayTag: \"\",\r\n        });\r\n        setProductUrl(\"\");\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Network error:\", err);\r\n      setMsg(\"‚ùå Network error\");\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={onSubmit}\r\n      className=\"bg-white shadow p-6 rounded-md space-y-4 max-w-2xl border border-gray-300\"\r\n    >\r\n      <h2 className=\"text-xl font-semibold text-blue-600 mb-2\">\r\n        Add New Deal\r\n      </h2>\r\n      {msg && <div className=\"text-sm\">{msg}</div>}\r\n\r\n      {/* üÜï Smart Fetch Section */}\r\n      <div className=\"flex gap-2 items-center\">\r\n        <input\r\n          type=\"url\"\r\n          placeholder=\"Paste Amazon / Walmart / Target product link...\"\r\n          value={productUrl}\r\n          onChange={(e) => setProductUrl(e.target.value)}\r\n          className=\"border p-2 rounded flex-1\"\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleAutoFetch}\r\n          disabled={fetching}\r\n          className={`px-4 py-2 rounded text-white ${\r\n            fetching ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\"\r\n          }`}\r\n        >\r\n          {fetching ? \"Fetching...\" : \"Fetch\"}\r\n        </button>\r\n      </div>\r\n\r\n      <input\r\n        name=\"description\"\r\n        value={form.description}\r\n        onChange={onChange}\r\n        placeholder=\"Description\"\r\n        className=\"input\"\r\n      />\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <input\r\n          name=\"currentPrice\"\r\n          value={form.currentPrice}\r\n          onChange={onChange}\r\n          placeholder=\"Current Price\"\r\n          className=\"input\"\r\n        />\r\n        <input\r\n          name=\"oldPrice\"\r\n          value={form.oldPrice}\r\n          onChange={onChange}\r\n          placeholder=\"Old Price\"\r\n          className=\"input\"\r\n        />\r\n        <input\r\n          name=\"storeName\"\r\n          value={form.storeName}\r\n          onChange={onChange}\r\n          placeholder=\"Store Name\"\r\n          className=\"input\"\r\n        />\r\n      </div>\r\n\r\n      <input\r\n        name=\"imageLink\"\r\n        value={form.imageLink}\r\n        onChange={onChange}\r\n        placeholder=\"Image Link\"\r\n        className=\"input\"\r\n      />\r\n      <input\r\n        name=\"productLink\"\r\n        value={form.productLink}\r\n        onChange={onChange}\r\n        placeholder=\"Product Link\"\r\n        className=\"input\"\r\n      />\r\n      <input\r\n        name=\"reviewLink\"\r\n        value={form.reviewLink}\r\n        onChange={onChange}\r\n        placeholder=\"Review Link\"\r\n        className=\"input\"\r\n      />\r\n      <input\r\n        name=\"couponCode\"\r\n        value={form.couponCode}\r\n        onChange={onChange}\r\n        placeholder=\"Coupon Code\"\r\n        className=\"input\"\r\n      />\r\n      <input\r\n        name=\"shippingCost\"\r\n        value={form.shippingCost}\r\n        onChange={onChange}\r\n        placeholder=\"Shipping Cost\"\r\n        className=\"input\"\r\n      />\r\n\r\n      {/* NOTES ‚Äî admin can paste links here, backend will parse URLs */}\r\n      <textarea\r\n        name=\"notes\"\r\n        value={form.notes}\r\n        onChange={onChange}\r\n        placeholder=\"Notes (plain text + links to similar deals)\"\r\n        className=\"input\"\r\n      />\r\n\r\n      <input\r\n        name=\"expireDate\"\r\n        value={form.expireDate}\r\n        onChange={onChange}\r\n        placeholder=\"Deal Expiry Date\"\r\n        className=\"input\"\r\n      />\r\n      <input\r\n        name=\"category\"\r\n        value={form.category}\r\n        onChange={onChange}\r\n        placeholder=\"Category\"\r\n        className=\"input\"\r\n      />\r\n\r\n      {/* Holiday / Event Tag */}\r\n      <select\r\n        name=\"holidayTag\"\r\n        value={form.holidayTag}\r\n        onChange={onChange}\r\n        className=\"input\"\r\n      >\r\n        {HOLIDAY_TAGS.map((tag) => (\r\n          <option key={tag} value={tag}>\r\n            {tag === \"\" ? \"No holiday / event\" : tag}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={saving}\r\n        className=\"w-full bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 transition\"\r\n      >\r\n        {saving ? \"Saving...\" : \"Save Deal\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/CatalogForm.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function CatalogForm() {\r\n  const [catalog, setCatalog] = useState({\r\n    storeName: \"\",\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    catalogLink: \"\",\r\n    screenshotLink: \"\",\r\n    pdfFile: null as File | null,\r\n  });\r\n\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  const handleChange = (e: any) => {\r\n    const { name, value, files } = e.target;\r\n    if (files) {\r\n      setCatalog({ ...catalog, [name]: files[0] });\r\n    } else {\r\n      setCatalog({ ...catalog, [name]: value });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setMsg(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/catalogs\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...catalog,\r\n          published_at: new Date().toISOString(),\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      setSaving(false);\r\n\r\n      if (!res.ok) {\r\n        setMsg(`‚ùå ${data.error || \"Failed to upload\"}`);\r\n      } else {\r\n        setMsg(\"‚úÖ Catalog uploaded successfully!\");\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Network error:\", err);\r\n      setMsg(\"‚ùå Network error\");\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Return statement now correctly inside the component\r\n  return (\r\n    <form onSubmit={onSubmit} className=\"space-y-4\">\r\n      {msg && <div className=\"text-sm\">{msg}</div>}\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <input\r\n          name=\"storeName\"\r\n          placeholder=\"Store Name\"\r\n          className=\"border border-gray-300 rounded-md p-2\"\r\n          value={catalog.storeName}\r\n          onChange={handleChange}\r\n        />\r\n        <div className=\"flex gap-2\">\r\n          <label className=\"flex-1\">\r\n            <span className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Start Date\r\n            </span>\r\n            <input\r\n              type=\"date\"\r\n              name=\"startDate\"\r\n              value={catalog.startDate}\r\n              onChange={handleChange}\r\n              className=\"w-full border border-gray-300 rounded-md p-2\"\r\n            />\r\n          </label>\r\n          <label className=\"flex-1\">\r\n            <span className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              End Date\r\n            </span>\r\n            <input\r\n              type=\"date\"\r\n              name=\"endDate\"\r\n              value={catalog.endDate}\r\n              onChange={handleChange}\r\n              className=\"w-full border border-gray-300 rounded-md p-2\"\r\n            />\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <input\r\n        name=\"catalogLink\"\r\n        placeholder=\"Catalog Link (URL)\"\r\n        className=\"border border-gray-300 rounded-md p-2 w-full\"\r\n        value={catalog.catalogLink}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <input\r\n        name=\"screenshotLink\"\r\n        placeholder=\"Screenshot Link (optional)\"\r\n        className=\"border border-gray-300 rounded-md p-2 w-full\"\r\n        value={catalog.screenshotLink}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\">\r\n          Upload Catalog (PDF)\r\n        </label>\r\n        <input\r\n          type=\"file\"\r\n          name=\"pdfFile\"\r\n          accept=\".pdf\"\r\n          onChange={handleChange}\r\n          className=\"border border-gray-300 rounded-md p-2 w-full\"\r\n        />\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={saving}\r\n        className=\"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition\"\r\n      >\r\n        {saving ? \"Uploading...\" : \"Upload Catalog\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;QACrC,WAAW;QACX,WAAW;QACX,SAAS;QACT,aAAa;QACb,gBAAgB;QAChB,SAAS;IACX;IAEA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QACvC,IAAI,OAAO;YACT,WAAW;gBAAE,GAAG,OAAO;gBAAE,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;YAAC;QAC5C,OAAO;YACL,WAAW;gBAAE,GAAG,OAAO;gBAAE,CAAC,KAAK,EAAE;YAAM;QACzC;IACF;IAEA,MAAM,WAAW,OAAO;QACtB,EAAE,cAAc;QAChB,UAAU;QACV,OAAO;QAEP,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,GAAG,OAAO;oBACV,cAAc,IAAI,OAAO,WAAW;gBACtC;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,UAAU;YAEV,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,OAAO,CAAC,EAAE,EAAE,KAAK,KAAK,IAAI,oBAAoB;YAChD,OAAO;gBACL,OAAO;YACT;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,OAAO;YACP,UAAU;QACZ;IACF;IAEA,wDAAwD;IACxD,qBACE,8OAAC;QAAK,UAAU;QAAU,WAAU;;YACjC,qBAAO,8OAAC;gBAAI,WAAU;0BAAW;;;;;;0BAElC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO,QAAQ,SAAS;wBACxB,UAAU;;;;;;kCAEZ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;;kDACf,8OAAC;wCAAK,WAAU;kDAA+C;;;;;;kDAG/D,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,QAAQ,SAAS;wCACxB,UAAU;wCACV,WAAU;;;;;;;;;;;;0CAGd,8OAAC;gCAAM,WAAU;;kDACf,8OAAC;wCAAK,WAAU;kDAA+C;;;;;;kDAG/D,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,QAAQ,OAAO;wCACtB,UAAU;wCACV,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAMlB,8OAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,WAAU;gBACV,OAAO,QAAQ,WAAW;gBAC1B,UAAU;;;;;;0BAGZ,8OAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,WAAU;gBACV,OAAO,QAAQ,cAAc;gBAC7B,UAAU;;;;;;0BAGZ,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAiC;;;;;;kCAGlD,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,QAAO;wBACP,UAAU;wBACV,WAAU;;;;;;;;;;;;0BAId,8OAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAU;0BAET,SAAS,iBAAiB;;;;;;;;;;;;AAInC","debugId":null}},
    {"offset": {"line": 594, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/CouponForm.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function CouponForm() {\r\n  const [coupon, setCoupon] = useState({\r\n    storeName: \"\",\r\n    couponLink: \"\",\r\n    expirationDate: \"\",\r\n    couponFile: null as File | null,\r\n  });\r\n\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  const handleChange = (e: any) => {\r\n    const { name, value, files } = e.target;\r\n    if (files) {\r\n      setCoupon({ ...coupon, [name]: files[0] });\r\n    } else {\r\n      setCoupon({ ...coupon, [name]: value });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setMsg(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/coupons\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...coupon,\r\n          published_at: new Date().toISOString(),\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      setSaving(false);\r\n\r\n      if (!res.ok) {\r\n        setMsg(`‚ùå ${data.error || \"Failed to save\"}`);\r\n      } else {\r\n        setMsg(\"‚úÖ Coupon saved successfully!\");\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Network error:\", err);\r\n      setMsg(\"‚ùå Network error\");\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Return now correctly inside the component\r\n  return (\r\n    <form onSubmit={onSubmit} className=\"space-y-4\">\r\n      {msg && <div className=\"text-sm\">{msg}</div>}\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <input\r\n          name=\"storeName\"\r\n          placeholder=\"Store Name\"\r\n          className=\"border border-gray-300 rounded-md p-2\"\r\n          value={coupon.storeName}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          name=\"couponLink\"\r\n          placeholder=\"Coupon Link (PDF URL)\"\r\n          className=\"border border-gray-300 rounded-md p-2\"\r\n          value={coupon.couponLink}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\">\r\n          Upload Coupon (PDF)\r\n        </label>\r\n        <input\r\n          type=\"file\"\r\n          name=\"couponFile\"\r\n          accept=\".pdf\"\r\n          onChange={handleChange}\r\n          className=\"border border-gray-300 rounded-md p-2 w-full\"\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\">\r\n          Expiration Date\r\n        </label>\r\n        <input\r\n          type=\"date\"\r\n          name=\"expirationDate\"\r\n          value={coupon.expirationDate}\r\n          onChange={handleChange}\r\n          className=\"border border-gray-300 rounded-md p-2 w-full\"\r\n        />\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={saving}\r\n        className=\"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition\"\r\n      >\r\n        {saving ? \"Saving...\" : \"Save Coupon\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;QACnC,WAAW;QACX,YAAY;QACZ,gBAAgB;QAChB,YAAY;IACd;IAEA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QACvC,IAAI,OAAO;YACT,UAAU;gBAAE,GAAG,MAAM;gBAAE,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;YAAC;QAC1C,OAAO;YACL,UAAU;gBAAE,GAAG,MAAM;gBAAE,CAAC,KAAK,EAAE;YAAM;QACvC;IACF;IAEA,MAAM,WAAW,OAAO;QACtB,EAAE,cAAc;QAChB,UAAU;QACV,OAAO;QAEP,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,gBAAgB;gBACtC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,GAAG,MAAM;oBACT,cAAc,IAAI,OAAO,WAAW;gBACtC;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,UAAU;YAEV,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,OAAO,CAAC,EAAE,EAAE,KAAK,KAAK,IAAI,kBAAkB;YAC9C,OAAO;gBACL,OAAO;YACT;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,OAAO;YACP,UAAU;QACZ;IACF;IAEA,8CAA8C;IAC9C,qBACE,8OAAC;QAAK,UAAU;QAAU,WAAU;;YACjC,qBAAO,8OAAC;gBAAI,WAAU;0BAAW;;;;;;0BAElC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO,OAAO,SAAS;wBACvB,UAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO,OAAO,UAAU;wBACxB,UAAU;;;;;;;;;;;;0BAId,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAiC;;;;;;kCAGlD,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,QAAO;wBACP,UAAU;wBACV,WAAU;;;;;;;;;;;;0BAId,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAiC;;;;;;kCAGlD,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,OAAO,OAAO,cAAc;wBAC5B,UAAU;wBACV,WAAU;;;;;;;;;;;;0BAId,8OAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAU;0BAET,SAAS,cAAc;;;;;;;;;;;;AAIhC","debugId":null}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/constants/holidays.ts"],"sourcesContent":["export const HOLIDAY_TAGS = [\r\n  \"\",\r\n  \"Black Friday\",\r\n  \"Cyber Monday\",\r\n  \"Thanksgiving Week\",\r\n  \"Christmas & Holiday\",\r\n  \"New Year\",\r\n  \"Back to School\",\r\n  \"Prime Day\",\r\n];\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,eAAe;IAC1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD","debugId":null}},
    {"offset": {"line": 791, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/DealsList.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { HOLIDAY_TAGS } from \"@/constants/holidays\";\r\n\r\nexport default function DealsList() {\r\n  const [deals, setDeals] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  const toggleStatus = async (deal: any) => {\r\n  const newStatus = deal.status === \"Published\" ? \"Draft\" : \"Published\";\r\n  try {\r\n    const res = await fetch(\"/api/deals\", {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ id: deal.id, status: newStatus }),\r\n    });\r\n    const data = await res.json();\r\n    if (res.ok) {\r\n      setDeals((prev) =>\r\n        prev.map((d) => (d.id === deal.id ? { ...d, status: newStatus } : d))\r\n      );\r\n    } else {\r\n      alert(`‚ùå ${data.error || \"Failed to update status\"}`);\r\n    }\r\n  } catch (e: any) {\r\n    alert(`‚ùå ${e.message}`);\r\n  }\r\n};\r\n\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // üîç Filters\r\n  const [search, setSearch] = useState(\"\");\r\n  const [storeFilter, setStoreFilter] = useState(\"\");\r\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n\r\n  // ‚ÜïÔ∏è Sorting\r\n  const [sortField, setSortField] = useState(\"published_at\");\r\n  const [sortOrder, setSortOrder] = useState(\"desc\");\r\n\r\n  // üìÑ Pagination\r\n  const [page, setPage] = useState(1);\r\n  const rowsPerPage = 20;\r\n\r\n  // ‚úèÔ∏è Edit Modal\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editDeal, setEditDeal] = useState<any>(null);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const fetchDeals = async () => {\r\n  setLoading(true);\r\n  try {\r\n    const res = await fetch(\"/api/deals\");\r\n    const data = await res.json();\r\n    console.log(\"üîç Deals API response:\", data); // üëà add this line\r\n    if (res.ok) setDeals(data);\r\n    else setError(data.error || \"Failed to load deals\");\r\n  } catch (e: any) {\r\n    console.error(\"‚ùå Fetch failed:\", e);\r\n    setError(e.message);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm(\"Are you sure you want to delete this deal?\")) return;\r\n    try {\r\n      const res = await fetch(\"/api/deals\", {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setDeals(deals.filter((d) => d.id !== id));\r\n      } else {\r\n        alert(`‚ùå ${data.error || \"Failed to delete\"}`);\r\n      }\r\n    } catch (e: any) {\r\n      alert(`‚ùå ${e.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (deal: any) => {\r\n    setEditDeal(deal);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editDeal) return;\r\n    setSaving(true);\r\n    try {\r\n      const res = await fetch(\"/api/deals\", {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n  id: editDeal.id,\r\n  description: editDeal.description,\r\n  store_name: editDeal.store_name,\r\n  category: editDeal.category,\r\n  old_price: editDeal.old_price,\r\n  current_price: editDeal.current_price,\r\n  price_diff: editDeal.price_diff,\r\n  percent_diff: editDeal.percent_diff,\r\n  deal_level: editDeal.deal_level, // ‚úÖ explicitly include it\r\n  product_link: editDeal.product_link,\r\n  image_link: editDeal.image_link,\r\n  review_link: editDeal.review_link,\r\n  coupon_code: editDeal.coupon_code,\r\n  shipping_cost: editDeal.shipping_cost,\r\n  notes: editDeal.notes,\r\n  holiday_tag: editDeal.holiday_tag ?? null,   // üëà NEW\r\n}),\r\n\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setDeals((prev) =>\r\n          prev.map((d) => (d.id === editDeal.id ? data.updated : d))\r\n        );\r\n        setIsModalOpen(false);\r\n      } else {\r\n        alert(`‚ùå ${data.error || \"Failed to update\"}`);\r\n      }\r\n    } catch (e: any) {\r\n      alert(`‚ùå ${e.message}`);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDeals();\r\n  }, []);\r\n\r\n  // üßÆ Filtered + Sorted deals\r\n  const filteredDeals = useMemo(() => {\r\n    let result = deals.filter((deal) => {\r\n      const matchesSearch =\r\n        search === \"\" ||\r\n        deal.description?.toLowerCase().includes(search.toLowerCase());\r\n      const matchesStore =\r\n        storeFilter === \"\" ||\r\n        deal.store_name?.toLowerCase() === storeFilter.toLowerCase();\r\n      const matchesCategory =\r\n        categoryFilter === \"\" ||\r\n        deal.category?.toLowerCase() === categoryFilter.toLowerCase();\r\n      const matchesDate =\r\n        dateFilter === \"\" ||\r\n        (deal.published_at &&\r\n          new Date(deal.published_at).toISOString().split(\"T\")[0] >=\r\n            dateFilter);\r\n\r\n      return matchesSearch && matchesStore && matchesCategory && matchesDate;\r\n    });\r\n\r\n    result.sort((a, b) => {\r\n      const valA = a[sortField];\r\n      const valB = b[sortField];\r\n      if (valA == null || valB == null) return 0;\r\n\r\n      if (sortField === \"published_at\") {\r\n        const dateA = new Date(valA).getTime();\r\n        const dateB = new Date(valB).getTime();\r\n        return sortOrder === \"asc\" ? dateA - dateB : dateB - dateA;\r\n      }\r\n\r\n      if (typeof valA === \"string\") {\r\n        return sortOrder === \"asc\"\r\n          ? valA.localeCompare(valB)\r\n          : valB.localeCompare(valA);\r\n      }\r\n\r\n      return sortOrder === \"asc\" ? valA - valB : valB - valA;\r\n    });\r\n\r\n\r\n    return result;\r\n  }, [\r\n    deals,\r\n    search,\r\n    storeFilter,\r\n    categoryFilter,\r\n    dateFilter,\r\n    sortField,\r\n    sortOrder,\r\n  ]);\r\n\r\n  // Pagination\r\n  const totalPages = Math.ceil(filteredDeals.length / rowsPerPage);\r\n  const paginatedDeals = filteredDeals.slice(\r\n    (page - 1) * rowsPerPage,\r\n    page * rowsPerPage\r\n  );\r\n\r\n  const storeNames = Array.from(new Set(deals.map((d) => d.store_name))).filter(Boolean);\r\n  const categories = Array.from(new Set(deals.map((d) => d.category))).filter(Boolean);\r\n\r\n  const resetFilters = () => {\r\n    setSearch(\"\");\r\n    setStoreFilter(\"\");\r\n    setCategoryFilter(\"\");\r\n    setDateFilter(\"\");\r\n    setSortField(\"published_at\");\r\n    setSortOrder(\"desc\");\r\n    setPage(1);\r\n  };\r\n\r\n  if (loading) return <p className=\"text-gray-600\">Loading deals...</p>;\r\n  if (error) return <p className=\"text-red-500\">{error}</p>;\r\n//console.log(\"‚úÖ DealsList component reached render with\", deals.length, \"deals\");\r\n//console.log(\"üîπ Filtered:\", filteredDeals.length, \"Paginated:\", paginatedDeals.length);\r\n\r\n  return (\r\n <div\r\n  className=\"mt-6 flex flex-col flex-grow bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden\"\r\n  style={{ minHeight: \"400px\" }}\r\n>\r\n  <div className=\"flex-grow overflow-auto custom-scroll p-4\">\r\n\r\n    <h2 className=\"text-xl font-semibold text-blue-600 mb-3\">\r\n      All Published Deals\r\n    </h2>\r\n\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-3 mb-4 items-center\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search description...\"\r\n          className=\"border rounded-md p-2 flex-1 min-w-[200px]\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={storeFilter}\r\n          onChange={(e) => setStoreFilter(e.target.value)}\r\n        >\r\n          <option value=\"\">All Stores</option>\r\n          {storeNames.map((s) => (\r\n            <option key={s} value={s}>\r\n              {s}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={categoryFilter}\r\n          onChange={(e) => setCategoryFilter(e.target.value)}\r\n        >\r\n          <option value=\"\">All Categories</option>\r\n          {categories.map((c) => (\r\n            <option key={c} value={c}>\r\n              {c}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <input\r\n          type=\"date\"\r\n          className=\"border rounded-md p-2\"\r\n          value={dateFilter}\r\n          onChange={(e) => setDateFilter(e.target.value)}\r\n        />\r\n\r\n        {/* Sorting */}\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={sortField}\r\n          onChange={(e) => setSortField(e.target.value)}\r\n        >\r\n          <option value=\"published_at\">Sort by Date</option>\r\n          <option value=\"percent_diff\">Sort by Discount %</option>\r\n          <option value=\"current_price\">Sort by Current Price</option>\r\n          <option value=\"store_name\">Sort by Store</option>\r\n        </select>\r\n\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={sortOrder}\r\n          onChange={(e) => setSortOrder(e.target.value)}\r\n        >\r\n          <option value=\"desc\">Descending</option>\r\n          <option value=\"asc\">Ascending</option>\r\n        </select>\r\n\r\n        <button\r\n          onClick={fetchDeals}\r\n          className=\"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n        >\r\n          Refresh\r\n        </button>\r\n\r\n        <button\r\n          onClick={resetFilters}\r\n          className=\"px-3 py-1 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400\"\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n{/* Table */}\r\n<div className=\"overflow-x-auto border border-gray-200 rounded-md mt-4\">\r\n  <table className=\"min-w-full text-sm text-gray-700\">\r\n    <thead className=\"bg-gray-100 text-left\">\r\n      <tr>\r\n        <th className=\"p-2\">Description</th>\r\n        <th className=\"p-2\">Store</th>\r\n        <th className=\"p-2\">Category</th>\r\n        <th className=\"p-2\">Current</th>\r\n        <th className=\"p-2\">Old</th>\r\n        <th className=\"p-2\">Discount %</th>\r\n        <th className=\"p-2\">Published</th>\r\n        <th className=\"p-2\">Status</th>\r\n        <th className=\"p-2 text-right\">Actions</th>\r\n      </tr>\r\n    </thead>\r\n\r\n    <tbody>\r\n      {paginatedDeals.length > 0 ? (\r\n        paginatedDeals.map((d) => (\r\n          <tr key={d.id} className=\"border-t hover:bg-gray-50 transition\">\r\n            <td className=\"p-2\">{d.description}</td>\r\n            <td className=\"p-2\">{d.store_name}</td>\r\n            <td className=\"p-2\">{d.category}</td>\r\n            <td className=\"p-2\">{d.current_price}</td>\r\n            <td className=\"p-2\">{d.old_price}</td>\r\n            <td className=\"p-2\">{d.percent_diff}</td>\r\n            <td className=\"p-2 text-gray-500\">\r\n              {d.published_at\r\n                ? new Date(d.published_at).toLocaleDateString()\r\n                : \"‚Äî\"}\r\n            </td>\r\n            <td className=\"p-2 text-center\">\r\n              <button\r\n                onClick={() => toggleStatus(d)}\r\n                className={`px-3 py-1 rounded text-white text-xs ${\r\n                  d.status === \"Published\"\r\n                    ? \"bg-green-600 hover:bg-green-700\"\r\n                    : \"bg-gray-500 hover:bg-gray-600\"\r\n                }`}\r\n              >\r\n                {d.status || \"Draft\"}\r\n              </button>\r\n            </td>\r\n            <td className=\"p-2 text-right space-x-2\">\r\n              <button\r\n                onClick={() => handleEdit(d)}\r\n                className=\"px-2 py-1 text-blue-600 border border-blue-500 rounded hover:bg-blue-50\"\r\n              >\r\n                Edit\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(d.id)}\r\n                className=\"px-2 py-1 text-red-600 border border-red-500 rounded hover:bg-red-50\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </td>\r\n\t\t\t\r\n          </tr>\r\n        ))\r\n      ) : (\r\n        <tr>\r\n          <td colSpan={9} className=\"text-center py-6 text-gray-500\">\r\n            No deals found\r\n          </td>\r\n        </tr>\r\n      )}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n  </div> {/* ‚Üê close inner scroll area */}\r\n\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-between items-center mt-4\">\r\n          <button\r\n            disabled={page === 1}\r\n            onClick={() => setPage((p) => p - 1)}\r\n            className={`px-3 py-1 rounded-md border ${\r\n              page === 1\r\n                ? \"bg-gray-200 text-gray-400\"\r\n                : \"bg-white text-blue-600 border-blue-400 hover:bg-blue-50\"\r\n            }`}\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          <span className=\"text-gray-600\">\r\n            Page {page} of {totalPages}\r\n          </span>\r\n\r\n          <button\r\n            disabled={page === totalPages}\r\n            onClick={() => setPage((p) => p + 1)}\r\n            className={`px-3 py-1 rounded-md border ${\r\n              page === totalPages\r\n                ? \"bg-gray-200 text-gray-400\"\r\n                : \"bg-white text-blue-600 border-blue-400 hover:bg-blue-50\"\r\n            }`}\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* ü™ü Edit Modal */}\r\n      {isModalOpen && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50\">\r\n<div className=\"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 relative max-h-[90vh] overflow-y-auto\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Edit Deal</h3>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Description\"\r\n    value={editDeal?.description || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, description: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Store Name\"\r\n    value={editDeal?.store_name || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, store_name: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    type=\"number\"\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Old Price\"\r\n    value={editDeal?.old_price || \"\"}\r\n    onChange={(e) => {\r\n      const newOld = parseFloat(e.target.value || \"0\");\r\n      const newCurr = parseFloat(editDeal?.current_price || \"0\");\r\n      const priceDiff = newOld - newCurr;\r\n      const percentDiff = newOld\r\n        ? Number(((priceDiff / newOld) * 100).toFixed(2))\r\n        : 0;\r\n\r\n      let dealLevel = \"\";\r\n      if (percentDiff >= 40 && percentDiff < 51) dealLevel = \"Blistering deal\";\r\n      else if (percentDiff >= 51 && percentDiff < 61) dealLevel = \"Scorching deal\";\r\n      else if (percentDiff >= 61 && percentDiff < 71) dealLevel = \"Searing deal\";\r\n      else if (percentDiff >= 71) dealLevel = \"Flaming deal\";\r\n\r\n      setEditDeal({\r\n        ...editDeal,\r\n        old_price: newOld,\r\n        price_diff: priceDiff,\r\n        percent_diff: percentDiff,\r\n        deal_level: dealLevel,\r\n      });\r\n    }}\r\n  />\r\n\r\n  <input\r\n    type=\"number\"\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Current Price\"\r\n    value={editDeal?.current_price || \"\"}\r\n    onChange={(e) => {\r\n      const newCurr = parseFloat(e.target.value || \"0\");\r\n      const newOld = parseFloat(editDeal?.old_price || \"0\");\r\n      const priceDiff = newOld - newCurr;\r\n      const percentDiff = newOld\r\n        ? Number(((priceDiff / newOld) * 100).toFixed(2))\r\n        : 0;\r\n\r\n      let dealLevel = \"\";\r\n      if (percentDiff >= 40 && percentDiff < 49) dealLevel = \"Blistering deal\";\r\n      else if (percentDiff >= 50 && percentDiff < 59) dealLevel = \"Scorching deal\";\r\n      else if (percentDiff >= 60 && percentDiff < 69) dealLevel = \"Searing deal\";\r\n      else if (percentDiff >= 70) dealLevel = \"Flaming deal\";\r\n\r\n      setEditDeal({\r\n        ...editDeal,\r\n        current_price: newCurr,\r\n        price_diff: priceDiff,\r\n        percent_diff: percentDiff,\r\n        deal_level: dealLevel,\r\n      });\r\n    }}\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Product Link\"\r\n    value={editDeal?.product_link || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, product_link: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Image Link\"\r\n    value={editDeal?.image_link || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, image_link: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Review Link\"\r\n    value={editDeal?.review_link || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, review_link: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Coupon Code\"\r\n    value={editDeal?.coupon_code || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, coupon_code: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Shipping Cost\"\r\n    value={editDeal?.shipping_cost || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, shipping_cost: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Category\"\r\n    value={editDeal?.category || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, category: e.target.value })\r\n    }\r\n  />\r\n\r\n  <input\r\n    className=\"border p-2 rounded\"\r\n    placeholder=\"Notes\"\r\n    value={editDeal?.notes || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, notes: e.target.value })\r\n    }\r\n  />\r\n\r\n  <select\r\n    className=\"border p-2 rounded\"\r\n    value={editDeal?.holiday_tag || \"\"}\r\n    onChange={(e) =>\r\n      setEditDeal({ ...editDeal, holiday_tag: e.target.value })\r\n    }\r\n  >\r\n    {HOLIDAY_TAGS.map((tag) => (\r\n      <option key={tag} value={tag}>\r\n        {tag === \"\" ? \"No holiday / event\" : tag}\r\n      </option>\r\n    ))}\r\n  </select>\r\n\r\n  {/* ‚úÖ THE CHECKBOX ‚Äî 100% visible now */}\r\n  <label className=\"flex items-center gap-2 border p-2 rounded col-span-2\">\r\n    <input\r\n      type=\"checkbox\"\r\n      checked={!!editDeal?.exclude_from_auto}\r\n      onChange={(e) =>\r\n        setEditDeal({\r\n          ...editDeal,\r\n          exclude_from_auto: e.target.checked,\r\n        })\r\n      }\r\n    />\r\n    <span>Exclude from auto-publish</span>\r\n  </label>\r\n</div>\r\n\r\n            <div className=\"flex justify-end gap-2 mt-5\">\r\n              <button\r\n                onClick={() => setIsModalOpen(false)}\r\n                className=\"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                disabled={saving}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\r\n              >\r\n                {saving ? \"Saving...\" : \"Save Changes\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1759, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/CatalogList.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\n\r\nexport default function CatalogList() {\r\n  const [catalogs, setCatalogs] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // üîç Filters\r\n  const [search, setSearch] = useState(\"\");\r\n  const [storeFilter, setStoreFilter] = useState(\"\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n\r\n  // ‚ÜïÔ∏è Sorting\r\n  const [sortField, setSortField] = useState(\"published_at\");\r\n  const [sortOrder, setSortOrder] = useState(\"desc\");\r\n\r\n  // üìÑ Pagination\r\n  const [page, setPage] = useState(1);\r\n  const rowsPerPage = 20;\r\n\r\n  // ‚úèÔ∏è Edit Modal\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editCatalog, setEditCatalog] = useState<any>(null);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const fetchCatalogs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/catalogs\");\r\n      const data = await res.json();\r\n      if (res.ok) setCatalogs(data);\r\n      else setError(data.error || \"Failed to load catalogs\");\r\n    } catch (e: any) {\r\n      setError(e.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm(\"Are you sure you want to delete this catalog?\")) return;\r\n    try {\r\n      const res = await fetch(\"/api/catalogs\", {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setCatalogs(catalogs.filter((c) => c.id !== id));\r\n      } else {\r\n        alert(`‚ùå ${data.error || \"Failed to delete\"}`);\r\n      }\r\n    } catch (e: any) {\r\n      alert(`‚ùå ${e.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (catalog: any) => {\r\n    setEditCatalog(catalog);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editCatalog) return;\r\n    setSaving(true);\r\n    try {\r\n      const res = await fetch(\"/api/catalogs\", {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: editCatalog.id,\r\n          store_name: editCatalog.store_name ?? \"\",\r\n          start_date: editCatalog.start_date ?? \"\",\r\n          end_date: editCatalog.end_date ?? \"\",\r\n          catalog_link: editCatalog.catalog_link ?? \"\",\r\n          screenshot_link: editCatalog.screenshot_link ?? \"\",\r\n          published_at: editCatalog.published_at ?? new Date().toISOString(),\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setCatalogs((prev) =>\r\n          prev.map((c) => (c.id === editCatalog.id ? data.updated : c))\r\n        );\r\n        setIsModalOpen(false);\r\n      } else {\r\n        alert(`‚ùå ${data.error || \"Failed to update\"}`);\r\n      }\r\n    } catch (e: any) {\r\n      alert(`‚ùå ${e.message}`);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCatalogs();\r\n  }, []);\r\n\r\n  // üßÆ Filtered and Sorted\r\n  const filteredCatalogs = useMemo(() => {\r\n    let result = catalogs.filter((cat) => {\r\n      const matchesSearch =\r\n        search === \"\" ||\r\n        cat.store_name?.toLowerCase().includes(search.toLowerCase());\r\n      const matchesStore =\r\n        storeFilter === \"\" ||\r\n        cat.store_name?.toLowerCase() === storeFilter.toLowerCase();\r\n      const matchesDate =\r\n        dateFilter === \"\" ||\r\n        (cat.published_at &&\r\n          new Date(cat.published_at).toISOString().split(\"T\")[0] >=\r\n            dateFilter);\r\n      return matchesSearch && matchesStore && matchesDate;\r\n    });\r\n\r\n    result.sort((a, b) => {\r\n      const valA = a[sortField];\r\n      const valB = b[sortField];\r\n      if (valA == null || valB == null) return 0;\r\n\r\n      if (sortField === \"published_at\") {\r\n        const dateA = new Date(valA).getTime();\r\n        const dateB = new Date(valB).getTime();\r\n        return sortOrder === \"asc\" ? dateA - dateB : dateB - dateA;\r\n      }\r\n\r\n      if (typeof valA === \"string\") {\r\n        return sortOrder === \"asc\"\r\n          ? valA.localeCompare(valB)\r\n          : valB.localeCompare(valA);\r\n      }\r\n\r\n      return sortOrder === \"asc\" ? valA - valB : valB - valA;\r\n    });\r\n\r\n    return result;\r\n  }, [catalogs, search, storeFilter, dateFilter, sortField, sortOrder]);\r\n\r\n  // üìÑ Pagination logic\r\n  const totalPages = Math.ceil(filteredCatalogs.length / rowsPerPage);\r\n  const paginatedCatalogs = filteredCatalogs.slice(\r\n    (page - 1) * rowsPerPage,\r\n    page * rowsPerPage\r\n  );\r\n\r\n  const storeNames = Array.from(\r\n    new Set(catalogs.map((c) => c.store_name))\r\n  ).filter(Boolean);\r\n\r\n  const resetFilters = () => {\r\n    setSearch(\"\");\r\n    setStoreFilter(\"\");\r\n    setDateFilter(\"\");\r\n    setSortField(\"published_at\");\r\n    setSortOrder(\"desc\");\r\n    setPage(1);\r\n  };\r\n\r\n  if (loading) return <p className=\"text-gray-600\">Loading catalogs...</p>;\r\n  if (error) return <p className=\"text-red-500\">{error}</p>;\r\n\r\n  return (\r\n    <div className=\"mt-6 relative\">\r\n      <h2 className=\"text-xl font-semibold text-blue-600 mb-3\">\r\n        All Published Catalogs\r\n      </h2>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-3 mb-4 items-center\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search store name...\"\r\n          className=\"border rounded-md p-2 flex-1 min-w-[200px]\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={storeFilter}\r\n          onChange={(e) => setStoreFilter(e.target.value)}\r\n        >\r\n          <option value=\"\">All Stores</option>\r\n          {storeNames.map((s) => (\r\n            <option key={s} value={s}>\r\n              {s}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <input\r\n          type=\"date\"\r\n          className=\"border rounded-md p-2\"\r\n          value={dateFilter}\r\n          onChange={(e) => setDateFilter(e.target.value)}\r\n        />\r\n\r\n        {/* Sort controls */}\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={sortField}\r\n          onChange={(e) => setSortField(e.target.value)}\r\n        >\r\n          <option value=\"published_at\">Sort by Published Date</option>\r\n          <option value=\"store_name\">Sort by Store</option>\r\n          <option value=\"start_date\">Sort by Start Date</option>\r\n          <option value=\"end_date\">Sort by End Date</option>\r\n        </select>\r\n\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={sortOrder}\r\n          onChange={(e) => setSortOrder(e.target.value)}\r\n        >\r\n          <option value=\"desc\">Descending</option>\r\n          <option value=\"asc\">Ascending</option>\r\n        </select>\r\n\r\n        <button\r\n          onClick={fetchCatalogs}\r\n          className=\"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n        >\r\n          Refresh\r\n        </button>\r\n\r\n        <button\r\n          onClick={resetFilters}\r\n          className=\"px-3 py-1 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400\"\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto border border-gray-200 rounded-md\">\r\n        <table className=\"min-w-full text-sm text-gray-700\">\r\n          <thead className=\"bg-gray-100 text-left\">\r\n            <tr>\r\n              <th className=\"p-2\">Store</th>\r\n              <th className=\"p-2\">Start Date</th>\r\n              <th className=\"p-2\">End Date</th>\r\n              <th className=\"p-2\">Catalog Link</th>\r\n              <th className=\"p-2\">Screenshot</th>\r\n              <th className=\"p-2\">Published</th>\r\n              <th className=\"p-2 text-right\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedCatalogs.map((cat) => (\r\n              <tr key={cat.id} className=\"border-t hover:bg-gray-50 transition\">\r\n                <td className=\"p-2\">{cat.store_name}</td>\r\n                <td className=\"p-2\">\r\n                  {cat.start_date\r\n                    ? new Date(cat.start_date).toLocaleDateString()\r\n                    : \"‚Äî\"}\r\n                </td>\r\n                <td className=\"p-2\">\r\n                  {cat.end_date\r\n                    ? new Date(cat.end_date).toLocaleDateString()\r\n                    : \"‚Äî\"}\r\n                </td>\r\n                <td className=\"p-2 text-blue-600 underline\">\r\n                  <a\r\n                    href={cat.catalog_link}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    View\r\n                  </a>\r\n                </td>\r\n                <td className=\"p-2 text-blue-600 underline\">\r\n                  {cat.screenshot_link ? (\r\n                    <a\r\n                      href={cat.screenshot_link}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                    >\r\n                      View\r\n                    </a>\r\n                  ) : (\r\n                    \"‚Äî\"\r\n                  )}\r\n                </td>\r\n                <td className=\"p-2 text-gray-500\">\r\n                  {cat.published_at\r\n                    ? new Date(cat.published_at).toLocaleDateString()\r\n                    : \"‚Äî\"}\r\n                </td>\r\n                <td className=\"p-2 text-right space-x-2\">\r\n                  <button\r\n                    onClick={() => handleEdit(cat)}\r\n                    className=\"px-2 py-1 text-blue-600 border border-blue-500 rounded hover:bg-blue-50\"\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(cat.id)}\r\n                    className=\"px-2 py-1 text-red-600 border border-red-500 rounded hover:bg-red-50\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-between items-center mt-4\">\r\n          <button\r\n            disabled={page === 1}\r\n            onClick={() => setPage((p) => p - 1)}\r\n            className={`px-3 py-1 rounded-md border ${\r\n              page === 1\r\n                ? \"bg-gray-200 text-gray-400\"\r\n                : \"bg-white text-blue-600 border-blue-400 hover:bg-blue-50\"\r\n            }`}\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          <span className=\"text-gray-600\">\r\n            Page {page} of {totalPages}\r\n          </span>\r\n\r\n          <button\r\n            disabled={page === totalPages}\r\n            onClick={() => setPage((p) => p + 1)}\r\n            className={`px-3 py-1 rounded-md border ${\r\n              page === totalPages\r\n                ? \"bg-gray-200 text-gray-400\"\r\n                : \"bg-white text-blue-600 border-blue-400 hover:bg-blue-50\"\r\n            }`}\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* ü™ü Edit Modal */}\r\n      {isModalOpen && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 relative\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Edit Catalog</h3>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <input\r\n                className=\"border p-2 rounded\"\r\n                placeholder=\"Store Name\"\r\n                value={editCatalog?.store_name || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCatalog({ ...editCatalog, store_name: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                type=\"date\"\r\n                className=\"border p-2 rounded\"\r\n                value={\r\n                  editCatalog?.start_date\r\n                    ? new Date(editCatalog.start_date)\r\n                        .toISOString()\r\n                        .split(\"T\")[0]\r\n                    : \"\"\r\n                }\r\n                onChange={(e) =>\r\n                  setEditCatalog({ ...editCatalog, start_date: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                type=\"date\"\r\n                className=\"border p-2 rounded\"\r\n                value={\r\n                  editCatalog?.end_date\r\n                    ? new Date(editCatalog.end_date).toISOString().split(\"T\")[0]\r\n                    : \"\"\r\n                }\r\n                onChange={(e) =>\r\n                  setEditCatalog({ ...editCatalog, end_date: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                className=\"border p-2 rounded col-span-2\"\r\n                placeholder=\"Catalog Link (URL)\"\r\n                value={editCatalog?.catalog_link || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCatalog({\r\n                    ...editCatalog,\r\n                    catalog_link: e.target.value,\r\n                  })\r\n                }\r\n              />\r\n              <input\r\n                className=\"border p-2 rounded col-span-2\"\r\n                placeholder=\"Screenshot Link\"\r\n                value={editCatalog?.screenshot_link || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCatalog({\r\n                    ...editCatalog,\r\n                    screenshot_link: e.target.value,\r\n                  })\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-2 mt-5\">\r\n              <button\r\n                onClick={() => setIsModalOpen(false)}\r\n                className=\"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                disabled={saving}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\r\n              >\r\n                {saving ? \"Saving...\" : \"Save Changes\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/CouponList.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\n\r\nexport default function CouponList() {\r\n  const [coupons, setCoupons] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Filters\r\n  const [search, setSearch] = useState(\"\");\r\n  const [storeFilter, setStoreFilter] = useState(\"\");\r\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n\r\n  // Sorting\r\n  const [sortField, setSortField] = useState(\"published_at\");\r\n  const [sortOrder, setSortOrder] = useState(\"desc\");\r\n\r\n  // Pagination\r\n  const [page, setPage] = useState(1);\r\n  const rowsPerPage = 20;\r\n\r\n  // Edit modal\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editCoupon, setEditCoupon] = useState<any>(null);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const fetchCoupons = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/coupons\");\r\n      const data = await res.json();\r\n      if (res.ok) setCoupons(data);\r\n      else setError(data.error || \"Failed to load coupons\");\r\n    } catch (e: any) {\r\n      setError(e.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm(\"Are you sure you want to delete this coupon?\")) return;\r\n    try {\r\n      const res = await fetch(\"/api/coupons\", {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) setCoupons(coupons.filter((c) => c.id !== id));\r\n      else alert(`‚ùå ${data.error || \"Failed to delete\"}`);\r\n    } catch (e: any) {\r\n      alert(`‚ùå ${e.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (coupon: any) => {\r\n    setEditCoupon(coupon);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editCoupon) return;\r\n    setSaving(true);\r\n    try {\r\n      const res = await fetch(\"/api/coupons\", {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: editCoupon.id,\r\n          store_name: editCoupon.store_name ?? \"\",\r\n          category: editCoupon.category ?? \"\",\r\n          coupon_code: editCoupon.coupon_code ?? \"\",\r\n          discount_type: editCoupon.discount_type ?? \"\",\r\n          discount_value: editCoupon.discount_value ?? \"\",\r\n          coupon_link: editCoupon.coupon_link ?? \"\",\r\n          expire_date: editCoupon.expire_date ?? \"\",\r\n          notes: editCoupon.notes ?? \"\",\r\n          published_at: editCoupon.published_at ?? new Date().toISOString(),\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setCoupons((prev) =>\r\n          prev.map((c) => (c.id === editCoupon.id ? data.updated : c))\r\n        );\r\n        setIsModalOpen(false);\r\n      } else {\r\n        alert(`‚ùå ${data.error || \"Failed to update\"}`);\r\n      }\r\n    } catch (e: any) {\r\n      alert(`‚ùå ${e.message}`);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCoupons();\r\n  }, []);\r\n\r\n  // Filtered + Sorted\r\n  const filteredCoupons = useMemo(() => {\r\n    let result = coupons.filter((c) => {\r\n      const matchesSearch =\r\n        search === \"\" ||\r\n        c.coupon_code?.toLowerCase().includes(search.toLowerCase());\r\n      const matchesStore =\r\n        storeFilter === \"\" ||\r\n        c.store_name?.toLowerCase() === storeFilter.toLowerCase();\r\n      const matchesCategory =\r\n        categoryFilter === \"\" ||\r\n        c.category?.toLowerCase() === categoryFilter.toLowerCase();\r\n      const matchesDate =\r\n        dateFilter === \"\" ||\r\n        (c.published_at &&\r\n          new Date(c.published_at).toISOString().split(\"T\")[0] >= dateFilter);\r\n      return matchesSearch && matchesStore && matchesCategory && matchesDate;\r\n    });\r\n\r\n    result.sort((a, b) => {\r\n      const valA = a[sortField];\r\n      const valB = b[sortField];\r\n      if (valA == null || valB == null) return 0;\r\n\r\n      if (sortField === \"published_at\") {\r\n        const dateA = new Date(valA).getTime();\r\n        const dateB = new Date(valB).getTime();\r\n        return sortOrder === \"asc\" ? dateA - dateB : dateB - dateA;\r\n      }\r\n\r\n      if (typeof valA === \"string\") {\r\n        return sortOrder === \"asc\"\r\n          ? valA.localeCompare(valB)\r\n          : valB.localeCompare(valA);\r\n      }\r\n\r\n      return sortOrder === \"asc\" ? valA - valB : valB - valA;\r\n    });\r\n\r\n    return result;\r\n  }, [coupons, search, storeFilter, categoryFilter, dateFilter, sortField, sortOrder]);\r\n\r\n  const totalPages = Math.ceil(filteredCoupons.length / rowsPerPage);\r\n  const paginatedCoupons = filteredCoupons.slice(\r\n    (page - 1) * rowsPerPage,\r\n    page * rowsPerPage\r\n  );\r\n\r\n  const storeNames = Array.from(new Set(coupons.map((c) => c.store_name))).filter(Boolean);\r\n  const categories = Array.from(new Set(coupons.map((c) => c.category))).filter(Boolean);\r\n\r\n  const resetFilters = () => {\r\n    setSearch(\"\");\r\n    setStoreFilter(\"\");\r\n    setCategoryFilter(\"\");\r\n    setDateFilter(\"\");\r\n    setSortField(\"published_at\");\r\n    setSortOrder(\"desc\");\r\n    setPage(1);\r\n  };\r\n\r\n  if (loading) return <p>Loading coupons...</p>;\r\n  if (error) return <p className=\"text-red-500\">{error}</p>;\r\n\r\n  return (\r\n    <div className=\"mt-6\">\r\n      <h2 className=\"text-xl font-semibold text-blue-600 mb-3\">\r\n        All Published Coupons\r\n      </h2>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-3 mb-4 items-center\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by code...\"\r\n          className=\"border rounded-md p-2 flex-1 min-w-[200px]\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={storeFilter}\r\n          onChange={(e) => setStoreFilter(e.target.value)}\r\n        >\r\n          <option value=\"\">All Stores</option>\r\n          {storeNames.map((s) => (\r\n            <option key={s} value={s}>\r\n              {s}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <select\r\n          className=\"border rounded-md p-2\"\r\n          value={categoryFilter}\r\n          onChange={(e) => setCategoryFilter(e.target.value)}\r\n        >\r\n          <option value=\"\">All Categories</option>\r\n          {categories.map((c) => (\r\n            <option key={c} value={c}>\r\n              {c}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <input\r\n          type=\"date\"\r\n          className=\"border rounded-md p-2\"\r\n          value={dateFilter}\r\n          onChange={(e) => setDateFilter(e.target.value)}\r\n        />\r\n        <button\r\n          onClick={fetchCoupons}\r\n          className=\"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n        >\r\n          Refresh\r\n        </button>\r\n        <button\r\n          onClick={resetFilters}\r\n          className=\"px-3 py-1 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400\"\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto border border-gray-200 rounded-md\">\r\n        <table className=\"min-w-full text-sm text-gray-700\">\r\n          <thead className=\"bg-gray-100 text-left\">\r\n            <tr>\r\n              <th className=\"p-2\">Store</th>\r\n              <th className=\"p-2\">Category</th>\r\n              <th className=\"p-2\">Coupon Code</th>\r\n              <th className=\"p-2\">Discount</th>\r\n              <th className=\"p-2\">Link</th>\r\n              <th className=\"p-2\">Expire Date</th>\r\n              <th className=\"p-2 text-right\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedCoupons.map((c) => (\r\n              <tr key={c.id} className=\"border-t hover:bg-gray-50 transition\">\r\n                <td className=\"p-2\">{c.store_name}</td>\r\n                <td className=\"p-2\">{c.category}</td>\r\n                <td className=\"p-2\">{c.coupon_code}</td>\r\n                <td className=\"p-2\">\r\n                  {c.discount_type && c.discount_value\r\n                    ? `${c.discount_value}${c.discount_type}`\r\n                    : \"‚Äî\"}\r\n                </td>\r\n                <td className=\"p-2 text-blue-600 underline\">\r\n                  {c.coupon_link ? (\r\n                    <a href={c.coupon_link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                      View\r\n                    </a>\r\n                  ) : (\r\n                    \"‚Äî\"\r\n                  )}\r\n                </td>\r\n                <td className=\"p-2\">\r\n                  {c.expire_date\r\n                    ? new Date(c.expire_date).toLocaleDateString()\r\n                    : \"‚Äî\"}\r\n                </td>\r\n                <td className=\"p-2 text-right space-x-2\">\r\n                  <button\r\n                    onClick={() => handleEdit(c)}\r\n                    className=\"px-2 py-1 text-blue-600 border border-blue-500 rounded hover:bg-blue-50\"\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(c.id)}\r\n                    className=\"px-2 py-1 text-red-600 border border-red-500 rounded hover:bg-red-50\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-between items-center mt-4\">\r\n          <button\r\n            disabled={page === 1}\r\n            onClick={() => setPage((p) => p - 1)}\r\n            className=\"px-3 py-1 rounded-md border\"\r\n          >\r\n            Previous\r\n          </button>\r\n          <span>\r\n            Page {page} of {totalPages}\r\n          </span>\r\n          <button\r\n            disabled={page === totalPages}\r\n            onClick={() => setPage((p) => p + 1)}\r\n            className=\"px-3 py-1 rounded-md border\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* ü™ü Edit Modal */}\r\n      {isModalOpen && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Edit Coupon</h3>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <input\r\n                className=\"border p-2 rounded\"\r\n                placeholder=\"Store Name\"\r\n                value={editCoupon?.store_name || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({ ...editCoupon, store_name: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                className=\"border p-2 rounded\"\r\n                placeholder=\"Category\"\r\n                value={editCoupon?.category || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({ ...editCoupon, category: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                className=\"border p-2 rounded\"\r\n                placeholder=\"Coupon Code\"\r\n                value={editCoupon?.coupon_code || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({ ...editCoupon, coupon_code: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                className=\"border p-2 rounded\"\r\n                placeholder=\"Discount Type (e.g. %, $)\"\r\n                value={editCoupon?.discount_type || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({ ...editCoupon, discount_type: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                className=\"border p-2 rounded\"\r\n                placeholder=\"Discount Value\"\r\n                value={editCoupon?.discount_value || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({\r\n                    ...editCoupon,\r\n                    discount_value: e.target.value,\r\n                  })\r\n                }\r\n              />\r\n              <input\r\n                className=\"border p-2 rounded col-span-2\"\r\n                placeholder=\"Coupon Link (URL)\"\r\n                value={editCoupon?.coupon_link || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({\r\n                    ...editCoupon,\r\n                    coupon_link: e.target.value,\r\n                  })\r\n                }\r\n              />\r\n              <input\r\n                type=\"date\"\r\n                className=\"border p-2 rounded col-span-2\"\r\n                value={\r\n                  editCoupon?.expire_date\r\n                    ? new Date(editCoupon.expire_date).toISOString().split(\"T\")[0]\r\n                    : \"\"\r\n                }\r\n                onChange={(e) =>\r\n                  setEditCoupon({ ...editCoupon, expire_date: e.target.value })\r\n                }\r\n              />\r\n              <textarea\r\n                className=\"border p-2 rounded col-span-2\"\r\n                placeholder=\"Notes\"\r\n                value={editCoupon?.notes || \"\"}\r\n                onChange={(e) =>\r\n                  setEditCoupon({ ...editCoupon, notes: e.target.value })\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-2 mt-5\">\r\n              <button\r\n                onClick={() => setIsModalOpen(false)}\r\n                className=\"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSave}\r\n                disabled={saving}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\r\n              >\r\n                {saving ? \"Saving...\" : \"Save Changes\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/BulkUploadDeals.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nexport default function BulkUploadDeals() {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [result, setResult] = useState<string>(\"\");\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      setFile(e.target.files[0]);\r\n      setResult(\"\"); // clear previous result\r\n    }\r\n  };\r\n\r\n  const parseCSV = (file: File) =>\r\n    new Promise<any[]>((resolve, reject) => {\r\n      Papa.parse(file, {\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        complete: (results) => resolve(results.data),\r\n        error: reject,\r\n      });\r\n    });\r\n\r\n  const parseXLSX = (file: File) =>\r\n    new Promise<any[]>((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        try {\r\n          const data = new Uint8Array(e.target?.result as ArrayBuffer);\r\n          const workbook = XLSX.read(data, { type: \"array\" });\r\n          const sheetName = workbook.SheetNames[0];\r\n          const worksheet = workbook.Sheets[sheetName];\r\n          const json = XLSX.utils.sheet_to_json(worksheet, { defval: \"\" });\r\n          resolve(json);\r\n        } catch (err) {\r\n          reject(err);\r\n        }\r\n      };\r\n      reader.onerror = reject;\r\n      reader.readAsArrayBuffer(file);\r\n    });\r\n\r\n  const handleUpload = async () => {\r\n    if (!file) return alert(\"Please select a file first.\");\r\n    setUploading(true);\r\n    setResult(\"\");\r\n\r\n    try {\r\n      let deals: any[] = [];\r\n\r\n      if (file.name.endsWith(\".csv\")) {\r\n        deals = await parseCSV(file);\r\n      } else if (file.name.endsWith(\".xlsx\") || file.name.endsWith(\".xls\")) {\r\n        deals = await parseXLSX(file);\r\n      } else {\r\n        alert(\"Unsupported file format. Please upload a CSV or Excel file.\");\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      if (!deals.length) {\r\n        alert(\"No valid data found in file.\");\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      const res = await fetch(\"/api/deals/bulk\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ deals }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setResult(`‚úÖ Successfully uploaded ${data.inserted || deals.length} deals.`);\r\n      } else {\r\n        setResult(`‚ùå Error: ${data.error || \"Upload failed.\"}`);\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Upload error:\", err);\r\n      setResult(`‚ùå ${err.message || \"Error parsing or uploading file.\"}`);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white rounded-lg shadow border border-gray-200\">\r\n      <h2 className=\"text-lg font-semibold mb-3 text-blue-600\">Bulk Upload Deals</h2>\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\".csv, .xlsx, .xls\"\r\n        onChange={handleFileChange}\r\n        className=\"border border-gray-300 p-2 rounded-md w-full mb-3\"\r\n      />\r\n\r\n      <button\r\n        onClick={handleUpload}\r\n        disabled={!file || uploading}\r\n        className={`px-4 py-2 text-white rounded-md ${\r\n          uploading ? \"bg-gray-400\" : \"bg-green-600 hover:bg-green-700\"\r\n        }`}\r\n      >\r\n        {uploading ? \"Uploading...\" : \"Upload File\"}\r\n      </button>\r\n\r\n      {result && (\r\n        <p\r\n          className={`mt-3 text-sm ${\r\n            result.startsWith(\"‚úÖ\") ? \"text-green-600\" : \"text-red-600\"\r\n          }`}\r\n        >\r\n          {result}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/SeasonalEventsManager.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype HolidayEvent = {\r\n  id: number;\r\n  name: string;\r\n  slug: string;\r\n  is_active: boolean;\r\n  start_date: string | null;\r\n  end_date: string | null;\r\n};\r\n\r\nexport default function SeasonalEventsManager() {\r\n  const [events, setEvents] = useState<HolidayEvent[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newStart, setNewStart] = useState(\"\");\r\n  const [newEnd, setNewEnd] = useState(\"\");\r\n\r\n  // -----------------------------\r\n  // Load events\r\n  // -----------------------------\r\n  const fetchEvents = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/holiday-events\");\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || \"Failed to load events\");\r\n      setEvents(data || []);\r\n    } catch (e: any) {\r\n      setError(e.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEvents();\r\n  }, []);\r\n\r\n  // -----------------------------\r\n  // Toggle Active\r\n  // -----------------------------\r\n  const toggleActive = async (ev: HolidayEvent) => {\r\n    try {\r\n      const res = await fetch(\"/api/holiday-events\", {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: ev.id,\r\n          is_active: !ev.is_active,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || \"Failed to update\");\r\n\r\n      setEvents((prev) =>\r\n        prev.map((e) =>\r\n          e.id === ev.id ? { ...e, is_active: !e.is_active } : e\r\n        )\r\n      );\r\n    } catch (err: any) {\r\n      alert(`‚ùå ${err.message}`);\r\n    }\r\n  };\r\n\r\n  // -----------------------------\r\n  // Create new event\r\n  // -----------------------------\r\n  const createEvent = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!newName.trim()) return alert(\"Event name is required\");\r\n\r\n    try {\r\n      const res = await fetch(\"/api/holiday-events\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          name: newName,\r\n          start_date: newStart || null,\r\n          end_date: newEnd || null,\r\n          is_active: false,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || \"Failed to create event\");\r\n\r\n      setEvents((prev) => [...prev, data.event]);\r\n      setNewName(\"\");\r\n      setNewStart(\"\");\r\n      setNewEnd(\"\");\r\n    } catch (err: any) {\r\n      alert(`‚ùå ${err.message}`);\r\n    }\r\n  };\r\n\r\n  // -----------------------------\r\n  // Elegant UI (Option C)\r\n  // -----------------------------\r\n  return (\r\n    <div className=\"bg-white border border-gray-200 rounded-md p-6 shadow-sm max-w-3xl\">\r\n      <h2 className=\"text-2xl font-semibold text-blue-600 mb-2\">\r\n        Seasonal Events Manager\r\n      </h2>\r\n\r\n      {/* Create new event */}\r\n      <form onSubmit={createEvent} className=\"mb-6 space-y-3\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Event name\"\r\n            className=\"input\"\r\n            value={newName}\r\n            onChange={(e) => setNewName(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            className=\"input\"\r\n            value={newStart}\r\n            onChange={(e) => setNewStart(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            className=\"input\"\r\n            value={newEnd}\r\n            onChange={(e) => setNewEnd(e.target.value)}\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm\"\r\n        >\r\n          Add Event\r\n        </button>\r\n      </form>\r\n\r\n      {/* Event list */}\r\n      {loading ? (\r\n        <p className=\"text-gray-500\">Loading events...</p>\r\n      ) : error ? (\r\n        <p className=\"text-red-500\">{error}</p>\r\n      ) : events.length === 0 ? (\r\n        <p className=\"text-gray-500\">No events defined yet.</p>\r\n      ) : (\r\n       <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6\">\r\n  {events.map((event) => (\r\n    <div\r\n      key={event.id}\r\n      className={`relative rounded-xl p-5 border bg-white shadow-sm\r\n        transition hover:shadow-md hover:-translate-y-1\r\n        ${event.is_active ? \"border-blue-300\" : \"border-gray-300 opacity-85\"}`}\r\n    >\r\n      {/* DELETE BUTTON */}\r\n      <button\r\n        onClick={async () => {\r\n  if (!confirm(`Delete event \"${event.name}\"?`)) return;\r\n\r\n  try {\r\n    const res = await fetch(\"/api/holiday-events\", {\r\n      method: \"DELETE\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ id: event.id }),\r\n    });\r\n\r\n    let data = null;\r\n    try {\r\n      data = await res.json();   // Safe attempt\r\n    } catch (e) {}\r\n\r\n    if (!res.ok) {\r\n      throw new Error(data?.error || \"Failed to delete\");\r\n    }\r\n\r\n    setEvents((prev) => prev.filter((e) => e.id !== event.id));\r\n  } catch (err: any) {\r\n    alert(`‚ùå ${err.message}`);\r\n  }\r\n}}\r\n\r\n        className=\"absolute top-3 right-3 text-gray-400 hover:text-red-500 transition\"\r\n        title=\"Delete event\"\r\n      >\r\n        üóëÔ∏è\r\n      </button>\r\n\r\n      {/* Top Row */}\r\n      <div className=\"flex justify-between items-start pr-8\">\r\n        <span className=\"text-3xl select-none\">üìÖ</span>\r\n\r\n        {/* Toggle */}\r\n        <button\r\n          onClick={() => toggleActive(event)}\r\n          className={`relative inline-flex h-6 w-11 rounded-full transition-colors duration-200\r\n            ${event.is_active ? \"bg-blue-600\" : \"bg-gray-300\"}`}\r\n        >\r\n          <span\r\n            className={`inline-block h-5 w-5 rounded-full bg-white shadow transform transition-transform\r\n              ${event.is_active ? \"translate-x-5\" : \"translate-x-0\"}`}\r\n          />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Name */}\r\n      <h3 className=\"mt-3 text-lg font-semibold text-gray-800\">\r\n        {event.name}\r\n      </h3>\r\n\r\n      {/* Dates */}\r\n      <div className=\"mt-4 flex items-center gap-4\">\r\n  {/* Start date input */}\r\n  <div className=\"text-center border rounded-lg px-3 py-2 shadow-sm bg-gray-50\">\r\n    <div className=\"text-xs text-gray-500 uppercase\">Start</div>\r\n   <input\r\n  type=\"date\"\r\n  defaultValue={event.start_date || \"\"}\r\n  onChange={(e) =>\r\n    setEvents((prev) =>\r\n      prev.map((x) =>\r\n        x.id === event.id ? { ...x, start_date: e.target.value } : x\r\n      )\r\n    )\r\n  }\r\n  className=\"mt-1 w-10 text-sm text-gray-800 bg-transparent outline-none border border-gray-300 rounded px-1 py-0.5\"\r\n/>\r\n  </div>\r\n\r\n  <span className=\"text-gray-400\">‚Äî</span>\r\n\r\n  {/* End date input */}\r\n  <div className=\"text-center border rounded-lg px-3 py-2 shadow-sm bg-gray-50\">\r\n    <div className=\"text-xs text-gray-500 uppercase\">End</div>\r\n   <input\r\n  type=\"date\"\r\n  defaultValue={event.end_date || \"\"}\r\n  onChange={(e) =>\r\n    setEvents((prev) =>\r\n      prev.map((x) =>\r\n        x.id === event.id ? { ...x, end_date: e.target.value } : x\r\n      )\r\n    )\r\n  }\r\n  className=\"mt-1 w-10 text-sm text-gray-800 bg-transparent outline-none border border-gray-300 rounded px-1 py-0.5\"\r\n/>\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n      {/* Status Badge */}\r\n      <div className=\"mt-4\">\r\n        <span\r\n          className={`px-3 py-1 rounded-full text-xs font-medium\r\n            ${\r\n              event.is_active\r\n                ? \"bg-blue-100 text-blue-700\"\r\n                : \"bg-gray-200 text-gray-600\"\r\n            }`}\r\n        >\r\n          {event.is_active ? \"ACTIVE\" : \"INACTIVE\"}\r\n        </span>\r\n      </div>\r\n\t  <div className=\"mt-3\">\r\n  <button\r\n    onClick={async () => {\r\n      try {\r\n        const res = await fetch(\"/api/holiday-events\", {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            id: event.id,\r\n            start_date: event.start_date,\r\n            end_date: event.end_date,\r\n          }),\r\n        });\r\n\r\n        const data = await res.json();\r\n        if (!res.ok) throw new Error(data.error || \"Failed to update dates\");\r\n\r\n        alert(\"Dates updated!\");\r\n      } catch (err: any) {\r\n        alert(`‚ùå ${err.message}`);\r\n      }\r\n    }}\r\n    className=\"px-3 py-1 bg-blue-600 text-white rounded-md text-xs hover:bg-blue-700\"\r\n  >\r\n    Save Dates\r\n  </button>\r\n</div>\r\n\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3699, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/components/admin/AdminAnalytics.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype AnalyticsStats = {\r\n  total_events: number;\r\n  event_type_counts: Record<string, number>;\r\n  page_counts: Record<string, number>;\r\n};\r\n\r\nexport default function AdminAnalytics() {\r\n  const [stats, setStats] = useState<AnalyticsStats | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/admin/analytics\")\r\n      .then((r) => r.json())\r\n      .then((data) => setStats(data));\r\n  }, []);\r\n\r\n  if (!stats) return <p className=\"p-6\">Loading analytics...</p>;\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <h2 className=\"text-xl font-bold\">Website Analytics</h2>\r\n\r\n      {/* Total events */}\r\n      <div className=\"border rounded p-4 bg-white shadow\">\r\n        <h3 className=\"font-semibold mb-2\">Total Events</h3>\r\n        <p>{stats.total_events}</p>\r\n      </div>\r\n\r\n      {/* Events by Type */}\r\n      <div className=\"border rounded p-4 bg-white shadow\">\r\n        <h3 className=\"font-semibold mb-2\">Events by Type</h3>\r\n\r\n        <ul>\r\n          {Object.entries(stats.event_type_counts).map(([key, value]) => (\r\n            <li key={key}>\r\n              {key}: {value}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      {/* Top Pages */}\r\n      <div className=\"border rounded p-4 bg-white shadow\">\r\n        <h3 className=\"font-semibold mb-2\">Top Pages</h3>\r\n        <ul>\r\n          {Object.entries(stats.page_counts).map(([page, count]) => (\r\n            <li key={page || \"(empty)\"}>\r\n              {page || \"(empty)\"}: {count}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAwB;IAE1D,IAAA,kNAAS,EAAC;QACR,MAAM,wBACH,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,IAClB,IAAI,CAAC,CAAC,OAAS,SAAS;IAC7B,GAAG,EAAE;IAEL,IAAI,CAAC,OAAO,qBAAO,8OAAC;QAAE,WAAU;kBAAM;;;;;;IAEtC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAoB;;;;;;0BAGlC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;kCAAG,MAAM,YAAY;;;;;;;;;;;;0BAIxB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCAEnC,8OAAC;kCACE,OAAO,OAAO,CAAC,MAAM,iBAAiB,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBACxD,8OAAC;;oCACE;oCAAI;oCAAG;;+BADD;;;;;;;;;;;;;;;;0BAQf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;kCACE,OAAO,OAAO,CAAC,MAAM,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,MAAM,iBACnD,8OAAC;;oCACE,QAAQ;oCAAU;oCAAG;;+BADf,QAAQ;;;;;;;;;;;;;;;;;;;;;;AAQ7B","debugId":null}},
    {"offset": {"line": 3835, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/dealswindfall/nextjs-boilerplate/app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport DealsForm from \"@/components/admin/DealsForm\";\r\nimport CatalogForm from \"@/components/admin/CatalogForm\";\r\nimport CouponForm from \"@/components/admin/CouponForm\";\r\nimport DealsList from \"@/components/admin/DealsList\";\r\nimport CatalogList from \"@/components/admin/CatalogList\";\r\nimport CouponList from \"@/components/admin/CouponList\";\r\nimport BulkUploadDeals from \"@/components/admin/BulkUploadDeals\";\r\nimport SeasonalEventsManager from \"@/components/admin/SeasonalEventsManager\";\r\nimport AdminAnalytics from \"@/components/admin/AdminAnalytics\";\r\n\r\nexport default function AdminPage() {\r\n  const [activeTab, setActiveTab] = useState(\"deals\");\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen bg-gray-50 p-6\">\r\n      {/* Logout Button */}\r\n      <button\r\n        onClick={async () => {\r\n          await fetch(\"/api/logout\", { method: \"POST\" });\r\n          window.location.href = \"/login\";\r\n        }}\r\n        className=\"absolute top-4 right-4 text-sm text-gray-600 hover:text-red-600\"\r\n      >\r\n        Logout\r\n      </button>\r\n\r\n      {/* Header */}\r\n      <h1 className=\"text-3xl font-bold text-blue-600 mb-4\">\r\n        Admin Dashboard\r\n      </h1>\r\n      <p className=\"text-gray-700 mb-6\">\r\n        Manage your <strong>Deals</strong>, <strong>Catalogs</strong>, and{\" \"}\r\n        <strong>Coupons</strong>.\r\n      </p>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b border-gray-200 mb-6 flex space-x-6\">\r\n        {[\r\n          { id: \"deals\", label: \"üî• Deals\" },\r\n          { id: \"catalogs\", label: \"üóÇÔ∏è Catalogs\" },\r\n          { id: \"coupons\", label: \"üéüÔ∏è Coupons\" },\r\n\t\t     { id: \"events\", label: \"üìÖ Seasonal Events\" }, // ‚úÖ new\r\n\t\t\t  { id: \"analytics\", label: \"üìä Analytics\" }, // ‚úÖ new\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id)}\r\n            className={`pb-2 text-lg font-medium border-b-2 ${\r\n              activeTab === tab.id\r\n                ? \"border-blue-500 text-blue-600\"\r\n                : \"border-transparent text-gray-500 hover:text-blue-500\"\r\n            } transition`}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === \"deals\" && (\r\n\t   <div>\r\n\t\t<DealsForm />\r\n\t\t <BulkUploadDeals />\r\n\t\t <a\r\n  href=\"/templates/deals-template.xlsx\"\r\n  download\r\n  className=\"ml-3 text-blue-600 underline text-sm hover:text-blue-800\"\r\n>\r\n  Download Template\r\n</a>\r\n\r\n\t\t<DealsList />\r\n\t   </div>\r\n\t )}\r\n\r\n      {activeTab === \"catalogs\" && (\r\n  <div>\r\n    <CatalogForm />\r\n    <CatalogList />\r\n  </div>\r\n)}\r\n\r\n     {activeTab === \"coupons\" && (\r\n  <div>\r\n    <CouponForm />\r\n    <CouponList />\r\n  </div>\r\n)}\r\n{activeTab === \"events\" && (\r\n        <div>\r\n          <SeasonalEventsManager />\r\n        </div>\r\n      )}\r\n\r\n{activeTab === \"analytics\" && (\r\n        <div>\r\n          <AdminAnalytics />\r\n        </div>\r\n      )}\r\n      </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* ------------------ Reusable Styles ------------------ */\r\nfunction Input({ placeholder }: { placeholder: string }) {\r\n  return (\r\n    <input\r\n      placeholder={placeholder}\r\n      className=\"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;;;;;;;;;;;AAae,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,SAAS;oBACP,MAAM,MAAM,eAAe;wBAAE,QAAQ;oBAAO;oBAC5C,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB;gBACA,WAAU;0BACX;;;;;;0BAKD,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;0BAGtD,8OAAC;gBAAE,WAAU;;oBAAqB;kCACpB,8OAAC;kCAAO;;;;;;oBAAc;kCAAE,8OAAC;kCAAO;;;;;;oBAAiB;oBAAM;kCACnE,8OAAC;kCAAO;;;;;;oBAAgB;;;;;;;0BAI1B,8OAAC;gBAAI,WAAU;0BACZ;oBACC;wBAAE,IAAI;wBAAS,OAAO;oBAAW;oBACjC;wBAAE,IAAI;wBAAY,OAAO;oBAAe;oBACxC;wBAAE,IAAI;wBAAW,OAAO;oBAAc;oBACzC;wBAAE,IAAI;wBAAU,OAAO;oBAAqB;oBAC9C;wBAAE,IAAI;wBAAa,OAAO;oBAAe;iBACrC,CAAC,GAAG,CAAC,CAAC,oBACL,8OAAC;wBAEC,SAAS,IAAM,aAAa,IAAI,EAAE;wBAClC,WAAW,CAAC,oCAAoC,EAC9C,cAAc,IAAI,EAAE,GAChB,kCACA,uDACL,WAAW,CAAC;kCAEZ,IAAI,KAAK;uBARL,IAAI,EAAE;;;;;;;;;;YAchB,cAAc,yBACjB,8OAAC;;kCACH,8OAAC,4IAAS;;;;;kCACT,8OAAC,kJAAe;;;;;kCAChB,8OAAC;wBACF,MAAK;wBACL,QAAQ;wBACR,WAAU;kCACX;;;;;;kCAIC,8OAAC,4IAAS;;;;;;;;;;;YAIL,cAAc,4BACnB,8OAAC;;kCACC,8OAAC,8IAAW;;;;;kCACZ,8OAAC,8IAAW;;;;;;;;;;;YAIV,cAAc,2BAClB,8OAAC;;kCACC,8OAAC,6IAAU;;;;;kCACX,8OAAC,6IAAU;;;;;;;;;;;YAGd,cAAc,0BACP,8OAAC;0BACC,cAAA,8OAAC,wJAAqB;;;;;;;;;;YAI/B,cAAc,6BACP,8OAAC;0BACC,cAAA,8OAAC,iJAAc;;;;;;;;;;;;;;;;AAKzB;AAMA,yDAAyD,GACzD,SAAS,MAAM,EAAE,WAAW,EAA2B;IACrD,qBACE,8OAAC;QACC,aAAa;QACb,WAAU;;;;;;AAGhB","debugId":null}}]
}